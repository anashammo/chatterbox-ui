# Chatterbox TTS API - Environment Configuration
# Copy this file to .env and configure as needed
# Most settings have sensible defaults and don't need to be changed
#
# ============================================================================
# Chatterbox TTS Project
# Backend: Port 8002
# Frontend: Port 4201
# Database: chatterbox_tts.db (SQLite) or chatterbox-postgres (Docker)
# ============================================================================

# ============================================================================
# Application Settings
# ============================================================================

# Application name and version (used in API responses)
APP_NAME=Chatterbox TTS API
APP_VERSION=1.0.0

# ============================================================================
# API Server Configuration
# ============================================================================

# Host to bind the API server to
# - 0.0.0.0: Listen on all network interfaces (default)
# - localhost or 127.0.0.1: Listen only on local machine
API_HOST=0.0.0.0

# Port for the API server
# Default: 8002
API_PORT=8002

# Logging level
# Options: debug, info, warning, error, critical
LOG_LEVEL=info

# ============================================================================
# HuggingFace Authentication
# ============================================================================

# HuggingFace token for downloading gated models (like Chatterbox)
# Get your token from: https://huggingface.co/settings/tokens
# Required for: Model download from HuggingFace Hub
# Note: You need to accept the model license on HuggingFace first
HF_TOKEN=

# ============================================================================
# Chatterbox TTS Model Configuration
# ============================================================================

# Default TTS model to use for synthesis
# Options: turbo, standard, multilingual
#
# Model Comparison:
# - turbo:        350M params, fastest, single-step generation
# - standard:     500M params, best quality, cfg/exaggeration tuning
# - multilingual: 500M params, 23+ languages, zero-shot voice cloning
TTS_DEFAULT_MODEL=turbo

# Device to run TTS model on
# Options: cuda, cpu
# - cuda: Use GPU acceleration (requires NVIDIA GPU with CUDA 12.8+)
# - cpu: Use CPU (much slower, but works without GPU)
TTS_DEVICE=cuda

# Default CFG weight for accent/style transfer (0.0-1.0)
# Lower = less accent transfer, Higher = more accent transfer
TTS_DEFAULT_CFG_WEIGHT=0.5

# Default exaggeration/expressiveness (0.0-1.0+)
# Lower = neutral, Higher = more expressive
TTS_DEFAULT_EXAGGERATION=0.5

# Maximum text length for synthesis (in characters)
TTS_MAX_TEXT_LENGTH=5000

# ============================================================================
# Model Pre-download Configuration (Docker only)
# ============================================================================

# Enable model pre-download on container startup
# Setting to false will download models on first use instead
PRELOAD_MODELS=true

# Space-separated list of models to pre-download
# Options: turbo, standard, multilingual
# Example: "turbo standard" to pre-download both turbo and standard
PRELOAD_MODEL_LIST=turbo

# ============================================================================
# Hot-Reload Configuration (Docker only)
# ============================================================================

# Enable hot-reload for development (auto-restart on code changes)
# Set to false for production deployments
HOT_RELOAD=true

# ============================================================================
# Database Configuration
# ============================================================================

# Database connection URL
# Default uses SQLite with local file (for development)
DATABASE_URL=sqlite:///./chatterbox_tts.db

# For Docker, PostgreSQL is used:
# DATABASE_URL=postgresql://chatterbox:chatterbox@chatterbox-postgres:5432/chatterbox_tts

# ============================================================================
# File Storage Settings
# ============================================================================

# Directory to store synthesized audio output files
AUDIO_OUTPUT_DIR=./audio_outputs

# Directory to store voice reference audio files
VOICE_REFERENCE_DIR=./voice_references

# Maximum voice reference file size (in MB)
# Default: 10MB
MAX_VOICE_REFERENCE_SIZE_MB=10

# Voice reference duration limits (in seconds)
# Chatterbox recommends ~10 seconds for optimal voice cloning
MIN_VOICE_REFERENCE_DURATION_SECONDS=5
MAX_VOICE_REFERENCE_DURATION_SECONDS=30

# ============================================================================
# CORS (Cross-Origin Resource Sharing) Configuration
# ============================================================================

# Allowed origins for CORS
# Default allows Angular frontend on localhost:4201 and 4200
CORS_ORIGINS=["http://localhost:4201","http://localhost:4200","http://localhost:3000"]

# ============================================================================
# Advanced Settings (Usually don't need to change)
# ============================================================================

# Enable debug mode (provides detailed error messages)
# WARNING: Only use in development, not in production
# DEBUG=false

# ============================================================================
# Notes
# ============================================================================
#
# 1. After changing .env, restart the backend server for changes to take effect
#
# 2. To use GPU acceleration:
#    - Ensure NVIDIA GPU drivers are installed
#    - Install CUDA toolkit (12.8 or higher for RTX 5090)
#    - Install PyTorch with CUDA support
#    - Set TTS_DEVICE=cuda
#
# 3. Model downloads:
#    - Models are cached in ~/.cache/huggingface/
#    - First use of a model will download it automatically
#
# 4. Database initialization:
#    - Run: python scripts/setup/init_db.py
#    - Safe to run multiple times (won't delete data)
#
# 5. Frontend configuration:
#    - Frontend expects backend on port 8002
#    - If you change API_PORT, update frontend environment.ts
#    - Path: src/presentation/frontend/src/environments/environment.ts

# ============================================================================
# Ngrok Configuration (Optional - for exposing services to internet)
# ============================================================================

# Ngrok auth token for tunneling services to internet
# Get your token from: https://dashboard.ngrok.com/get-started/your-authtoken
# Required only if using --ngrok flag with docker scripts:
#   python scripts/docker/run.py --ngrok
#   python scripts/docker/rebuild.py --ngrok
NGROK_AUTHTOKEN=
