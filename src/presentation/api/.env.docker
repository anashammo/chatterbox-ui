# ============================================================================
# Chatterbox TTS API - Backend Docker Environment Configuration
# ============================================================================
# Copy this file to .env in the same directory for Docker deployment
# This configuration is optimized for Docker containers
# ============================================================================

# ============================================================================
# PostgreSQL Database Configuration (Docker)
# ============================================================================
POSTGRES_USER=chatterbox
POSTGRES_PASSWORD=change_this_secure_password_in_production
POSTGRES_DB=chatterbox_tts

# Database connection URL (for PostgreSQL in Docker)
# Automatically constructed from above variables in docker-compose.yml
# Format: postgresql://user:password@host:port/database
# DATABASE_URL=postgresql://chatterbox:password@postgres:5432/chatterbox_tts

# ============================================================================
# Application Settings
# ============================================================================
APP_NAME="Chatterbox TTS API"
APP_VERSION=1.0.0

# Debug mode (provides detailed error messages)
# WARNING: Only use in development, not in production
DEBUG=false

# Logging level
LOG_LEVEL=INFO

# ============================================================================
# API Server Configuration
# ============================================================================
# Host to bind (use 0.0.0.0 for Docker to accept external connections)
API_HOST=0.0.0.0

# API Port (internal container port, mapped in docker-compose.yml)
API_PORT=8002

# External port mapping (configured in docker-compose.yml)
BACKEND_PORT=8002
FRONTEND_PORT=4201

# ============================================================================
# Chatterbox TTS Model Configuration
# ============================================================================
# Default TTS model for synthesis
# Options: turbo, standard, multilingual
TTS_DEFAULT_MODEL=turbo

# Device for TTS (cuda for GPU, cpu for CPU-only)
# Docker: cuda (requires nvidia-docker runtime)
TTS_DEVICE=cuda

# Default CFG weight for accent/style transfer (0.0-1.0)
TTS_DEFAULT_CFG_WEIGHT=0.5

# Default exaggeration/expressiveness (0.0-1.0+)
TTS_DEFAULT_EXAGGERATION=0.5

# Maximum text length for synthesis (in characters)
TTS_MAX_TEXT_LENGTH=5000

# ============================================================================
# File Storage Settings
# ============================================================================
# Directory for synthesized audio output files (inside container, mapped to volume)
AUDIO_OUTPUT_DIR=/app/audio_outputs

# Directory for voice reference files (inside container, mapped to volume)
VOICE_REFERENCE_DIR=/app/voice_references

# Maximum voice reference file size (in MB)
MAX_VOICE_REFERENCE_SIZE_MB=10

# Voice reference duration limits (in seconds)
MIN_VOICE_REFERENCE_DURATION_SECONDS=5
MAX_VOICE_REFERENCE_DURATION_SECONDS=30

# ============================================================================
# CORS Configuration
# ============================================================================
# Allowed origins for CORS
# For Docker: Include both internal (container) and external (host) URLs
# Format: JSON array
CORS_ORIGINS='["http://localhost","http://localhost:4201","http://frontend","*"]'

# ============================================================================
# Docker-Specific Notes
# ============================================================================
#
# 1. Database:
#    - Uses PostgreSQL (configured above)
#    - Data persists in chatterbox-postgres-data volume
#
# 2. Model Caching:
#    - Models are cached in chatterbox-model-cache Docker volume
#    - Persists across container restarts and rebuilds
#    - First run will download models (may take time)
#    - Chatterbox models: ~350MB (turbo), ~500MB (standard/multilingual)
#
# 3. GPU Access:
#    - Requires nvidia-docker runtime installed on host
#    - GPU must be visible to Docker: docker run --gpus all
#    - RTX 5090 requires CUDA 12.8+ (Blackwell architecture, sm_120)
#    - Verify with: docker run --rm --gpus all nvidia/cuda:12.8.0-base-ubuntu22.04 nvidia-smi
#
# 4. Networking:
#    - Frontend and backend communicate via Docker network
#    - API URL in frontend: http://backend:8002/api/v1 (internal)
#    - External access: http://localhost:8002 (backend)
#
# 5. Volumes:
#    - chatterbox-postgres-data: PostgreSQL database files
#    - chatterbox-audio-outputs: Synthesized audio files
#    - chatterbox-voice-references: Voice reference files for cloning
#    - chatterbox-model-cache: Chatterbox model files (~/.cache/huggingface)
#
# 6. Environment Variable Loading:
#    - This file should be copied to src/presentation/api/.env
#    - Docker Compose will load it automatically via env_file directive
#    - Changes require container restart: docker-compose restart backend
#
